html(ng-app="Cloudfader")
	head
		title Cloudfader
		link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.1.2/foundation.min.css")
		link(rel="stylesheet", href="/css/style.css")
		script(src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js")
		script(src="https://code.jquery.com/jquery-2.2.0.min.js")
		script(src="js/controllers.js")
		script(src="https://w.soundcloud.com/player/api.js")
		script(src='https://connect.soundcloud.com/sdk/sdk-3.0.0.js')
		script(src="https://w.soundcloud.com/player/api.js")
		script(type="text/javascript").
			SC.initialize({
				client_id: '345c596bb33bd22fef0e526ea90948c6'
			});
	body(ng-controller="CloudfaderController")
		.row
			h1 Cloudfader

		.row
			.small-5.columns#deck-a
				h3 Deck A
				.row
					h4 Player
					div#a-widget(ng-bind-html="deckA.html | sanitize")
				.row 
					h4 Queue
				.row.small-8(ng-repeat="track in deckA.queue")
					.small-4.columns
						img(ng-src="{{track.artwork_url}}")
					.small-6.columns
						p {{track.title}}
					.small-2.columns
						a(ng-click="removeFromQueue(deckA, track)") Remove

				form(ng-submit="search(deckA, queryA)").small-6
					.row
						h4 Search Soundcloud
						.input-group
							input.input-group-field(type="text", ng-model='queryA', name='queryA')
							.input-group-button
								input(type="submit", class="button", value="Submit")

				.row.small-8
					h4 Search Results
					.row(ng-repeat="result in deckA.searchResults")
						.small-8.columns
							p {{result.title}} 
						.small-4.columns
							button.button(type=button, ng-click="addToQueue(deckA, result)") Add
			.small-2.columns
				h3 Fader
			.small-5.columns#deck-a
				h3 Deck B
				.row
					h4 Player
					div#b-widget(ng-bind-html="deckB.html | sanitize")
				.row 
					h4 Queue
				.row.small-8(ng-repeat="track in deckB.queue")
					.small-4.columns
						img(ng-src="{{track.artwork_url}}")
					.small-6.columns
						p {{track.title}}
					.small-2.columns
						a(ng-click="removeFromQueue(deckB, track)") Remove

				form(ng-submit="search(deckB, queryB)").small-6
					.row
						h4 Search Soundcloud
						.input-group
							input.input-group-field(type="text", ng-model='queryB', name='queryB')
							.input-group-button
								input(type="submit", class="button", value="Submit")

				.row.small-8
					h4 Search Results
					.row(ng-repeat="result in deckB.searchResults")
						.small-8.columns
							p {{result.title}} 
						.small-4.columns
							button.button(type=button, ng-click="addToQueue(deckB, result)") Add


